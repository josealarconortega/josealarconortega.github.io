(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{285:(e,r,t)=>{"use strict";t.d(r,{$:()=>c});var s=t(5155),a=t(2115),n=t(4253),o=t(2085),i=t(9434);let l=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,r)=>{let{className:t,variant:a,size:o,asChild:c=!1,...d}=e,u=c?n.DX:"button";return(0,s.jsx)(u,{className:(0,i.cn)(l({variant:a,size:o,className:t})),ref:r,...d})});c.displayName="Button"},697:(e,r,t)=>{"use strict";t.d(r,{V:()=>i,i:()=>o});var s=t(5594);let a=s.z.object({username:s.z.string().min(1,"El nombre de usuario es requerido."),password:s.z.string().min(1,"La contrase\xf1a es requerida.")}),n="https://farmacia-stock-api-593852923734.southamerica-west1.run.app";async function o(e,r){try{let t=a.safeParse({username:e,password:r});if(!t.success)return{success:!1,message:"Datos inv\xe1lidos."};let{username:s,password:o}=t.data,i=await fetch("".concat(n,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s,password:o})});if(200===i.status||201===i.status){let e=await i.json();return{success:!0,token:e.token,message:"Login exitoso"}}{if(401===i.status||403===i.status)return{success:!1,message:"Credenciales incorrectas"};let e=await i.text();return console.error("Error from login API:",e),{success:!1,message:"Error del servidor: ".concat(i.status,". Intente de nuevo.")}}}catch(e){return console.error("Error en loginAction:",e),{success:!1,message:e.message||"Ocurri\xf3 un error. Por favor, intente de nuevo."}}}async function i(e,r){if(console.log("searchStockAction"),!r)return{data:null,message:"Error de autenticaci\xf3n. Por favor, inicie sesi\xf3n de nuevo."};try{let t=await fetch("".concat(n,"/stock?filtro=").concat(e),{method:"GET",headers:{"Content-Type":"application/json","x-auth-token":r}});if(t.ok){let e=await t.json();if(e.productos&&e.productos.length>0)return console.log(e.productos),{data:e.productos};return{data:[],message:"No se encontraron productos con ese filtro."}}{let e=await t.text();return console.error("Error fetching stock:",e),{data:null,message:"Error del servidor: ".concat(t.status,".")}}}catch(e){return console.error("Error en searchStockAction:",e),{data:null,message:e.message||"Ocurri\xf3 un error al buscar el stock."}}}},1420:(e,r,t)=>{Promise.resolve().then(t.bind(t,2456))},2456:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>A});var s=t(5155),a=t(5695),n=t(2115),o=t(9464),i=t(9946);let l=(0,i.A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),c=(0,i.A)("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);var d=t(5339),u=t(285),f=t(9434);let m=n.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,f.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});m.displayName="Card";let p=n.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,f.cn)("flex flex-col space-y-1.5 p-6",t),...a})});p.displayName="CardHeader";let g=n.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,f.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});g.displayName="CardTitle";let v=n.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,f.cn)("text-sm text-muted-foreground",t),...a})});v.displayName="CardDescription";let h=n.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,f.cn)("p-6 pt-0",t),...a})});h.displayName="CardContent",n.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,f.cn)("flex items-center p-6 pt-0",t),...a})}).displayName="CardFooter";var x=t(2523),y=t(3540),b=n.forwardRef((e,r)=>(0,s.jsx)(y.sG.label,{...e,ref:r,onMouseDown:r=>{var t;r.target.closest("button, input, select, textarea")||(null==(t=e.onMouseDown)||t.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));b.displayName="Label";let w=(0,t(2085).F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),j=n.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(b,{ref:r,className:(0,f.cn)(w(),t),...a})});j.displayName=b.displayName;var N=t(697),k=t(5365),R=t(9355),C=t(3580);function E(){let e=(0,a.useRouter)(),{login:r}=(0,o.A)(),[t,i]=(0,n.useState)({success:!1,message:void 0,token:void 0}),[f,y]=(0,n.useState)(!1),b=async t=>{t.preventDefault(),y(!0);let s=new FormData(t.currentTarget),a=s.get("username"),n=s.get("password"),o=await (0,N.i)(a,n);i(o),y(!1),o.success&&o.token&&(r(o.token),e.replace("/dashboard"))};return(0,n.useEffect)(()=>{(null==t?void 0:t.success)&&t.token&&(r(t.token),e.replace("/dashboard"))},[t,r,e]),(0,s.jsxs)(m,{className:"w-full max-w-sm shadow-2xl",children:[(0,s.jsxs)(p,{className:"text-center",children:[(0,s.jsx)("div",{className:"mx-auto mb-4",children:(0,s.jsx)(R.g,{className:"h-12 w-12 text-primary"})}),(0,s.jsx)(g,{className:"text-3xl font-bold",children:"StockTrack Rx"}),(0,s.jsx)(v,{children:"Ingrese a su cuenta para continuar"})]}),(0,s.jsx)(h,{children:(0,s.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(j,{htmlFor:"username",children:"Usuario"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(l,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(x.p,{id:"username",name:"username",placeholder:"su_usuario",required:!0,className:"pl-10"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(j,{htmlFor:"password",children:"Contrase\xf1a"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(c,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(x.p,{id:"password",name:"password",type:"password",required:!0,placeholder:"••••••••",className:"pl-10"})]})]}),t&&!t.success&&t.message&&(0,s.jsxs)(k.Fc,{variant:"destructive",children:[(0,s.jsx)(d.A,{className:"h-4 w-4"}),(0,s.jsx)(k.XL,{children:"Error de inicio de sesi\xf3n"}),(0,s.jsx)(k.TN,{children:t.message})]}),(0,s.jsxs)(u.$,{type:"submit",className:"w-full",disabled:f,children:[f?(0,s.jsx)(C.y,{size:"sm",className:"mr-2"}):null,f?"Ingresando...":"Ingresar"]})]})})]})}function A(){let{isAuthenticated:e,isLoading:r}=(0,o.A)(),t=(0,a.useRouter)();return((0,n.useEffect)(()=>{!r&&e&&t.replace("/dashboard")},[r,e,t]),r||e)?(0,s.jsx)("div",{className:"flex h-screen w-full items-center justify-center bg-background",children:(0,s.jsx)(C.y,{size:"lg"})}):(0,s.jsx)("main",{className:"flex min-h-screen flex-col items-center justify-center bg-background p-4",children:(0,s.jsx)(E,{})})}},2523:(e,r,t)=>{"use strict";t.d(r,{p:()=>o});var s=t(5155),a=t(2115),n=t(9434);let o=a.forwardRef((e,r)=>{let{className:t,type:a,...o}=e;return(0,s.jsx)("input",{type:a,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...o})});o.displayName="Input"},3540:(e,r,t)=>{"use strict";t.d(r,{sG:()=>u,hO:()=>f});var s=t(2115),a=t(7650),n=t(6101),o=t(5155),i=s.forwardRef((e,r)=>{let{children:t,...a}=e,n=s.Children.toArray(t),i=n.find(d);if(i){let e=i.props.children,t=n.map(r=>r!==i?r:s.Children.count(e)>1?s.Children.only(null):s.isValidElement(e)?e.props.children:null);return(0,o.jsx)(l,{...a,ref:r,children:s.isValidElement(e)?s.cloneElement(e,void 0,t):null})}return(0,o.jsx)(l,{...a,ref:r,children:t})});i.displayName="Slot";var l=s.forwardRef((e,r)=>{let{children:t,...a}=e;if(s.isValidElement(t)){let e=function(e){let r=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,t=r&&"isReactWarning"in r&&r.isReactWarning;return t?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in r&&r.isReactWarning)?e.props.ref:e.props.ref||e.ref}(t),o=function(e,r){let t={...r};for(let s in r){let a=e[s],n=r[s];/^on[A-Z]/.test(s)?a&&n?t[s]=(...e)=>{n(...e),a(...e)}:a&&(t[s]=a):"style"===s?t[s]={...a,...n}:"className"===s&&(t[s]=[a,n].filter(Boolean).join(" "))}return{...e,...t}}(a,t.props);return t.type!==s.Fragment&&(o.ref=r?(0,n.t)(r,e):e),s.cloneElement(t,o)}return s.Children.count(t)>1?s.Children.only(null):null});l.displayName="SlotClone";var c=({children:e})=>(0,o.jsx)(o.Fragment,{children:e});function d(e){return s.isValidElement(e)&&e.type===c}var u=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,r)=>{let t=s.forwardRef((e,t)=>{let{asChild:s,...a}=e,n=s?i:r;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,o.jsx)(n,{...a,ref:t})});return t.displayName=`Primitive.${r}`,{...e,[r]:t}},{});function f(e,r){e&&a.flushSync(()=>e.dispatchEvent(r))}},3580:(e,r,t)=>{"use strict";t.d(r,{y:()=>l});var s=t(5155),a=t(9434),n=t(2085);let o=(0,t(9946).A)("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]),i=(0,n.F)("animate-spin text-primary",{variants:{size:{sm:"size-4",md:"size-6",lg:"size-8",icon:"size-5"}},defaultVariants:{size:"md"}});function l(e){let{size:r,className:t}=e;return(0,s.jsx)(o,{className:(0,a.cn)(i({size:r,className:t}))})}},5365:(e,r,t)=>{"use strict";t.d(r,{Fc:()=>l,TN:()=>d,XL:()=>c});var s=t(5155),a=t(2115),n=t(2085),o=t(9434);let i=(0,n.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),l=a.forwardRef((e,r)=>{let{className:t,variant:a,...n}=e;return(0,s.jsx)("div",{ref:r,role:"alert",className:(0,o.cn)(i({variant:a}),t),...n})});l.displayName="Alert";let c=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("h5",{ref:r,className:(0,o.cn)("mb-1 font-medium leading-none tracking-tight",t),...a})});c.displayName="AlertTitle";let d=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,o.cn)("text-sm [&_p]:leading-relaxed",t),...a})});d.displayName="AlertDescription"},5695:(e,r,t)=>{"use strict";var s=t(8999);t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}})},6101:(e,r,t)=>{"use strict";t.d(r,{s:()=>o,t:()=>n});var s=t(2115);function a(e,r){if("function"==typeof e)return e(r);null!=e&&(e.current=r)}function n(...e){return r=>{let t=!1,s=e.map(e=>{let s=a(e,r);return t||"function"!=typeof s||(t=!0),s});if(t)return()=>{for(let r=0;r<s.length;r++){let t=s[r];"function"==typeof t?t():a(e[r],null)}}}}function o(...e){return s.useCallback(n(...e),e)}},9355:(e,r,t)=>{"use strict";t.d(r,{g:()=>n});var s=t(5155);let a=(0,t(9946).A)("Pill",[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]]);function n(e){return(0,s.jsx)(a,{...e})}},9434:(e,r,t)=>{"use strict";t.d(r,{cn:()=>n});var s=t(2596),a=t(9688);function n(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.QP)((0,s.$)(r))}},9464:(e,r,t)=>{"use strict";t.d(r,{A:()=>i,AuthProvider:()=>o});var s=t(5155),a=t(2115);let n=(0,a.createContext)(void 0);function o(e){let{children:r}=e,[t,o]=(0,a.useState)(null),[i,l]=(0,a.useState)(!0);(0,a.useEffect)(()=>{try{let e=sessionStorage.getItem("authToken");e&&o(e)}catch(e){console.error("Failed to access session storage:",e)}finally{l(!1)}},[]);let c=(0,a.useCallback)(e=>{o(e);try{sessionStorage.setItem("authToken",e)}catch(e){console.error("Failed to access session storage:",e)}},[]),d=(0,a.useCallback)(()=>{o(null);try{sessionStorage.removeItem("authToken")}catch(e){console.error("Failed to access session storage:",e)}},[]);return(0,s.jsx)(n.Provider,{value:{token:t,isAuthenticated:!!t,isLoading:i,login:c,logout:d},children:r})}function i(){let e=(0,a.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{var r=r=>e(e.s=r);e.O(0,[823,444,441,684,358],()=>r(1420)),_N_E=e.O()}]);